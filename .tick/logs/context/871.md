# Epic Context: 871 - FO-04: Discovery Agent

## Relevant Code
- `src/mastra/agents/fo-03/agent.ts` - Reference agent implementation
- `src/mastra/agents/fo-03/index.ts` - Agent exports
- `src/db/seed.ts` - KV store seed data
- `src/services/keyvaluestore.ts` - KV store service
- `src/services/template-engine.ts` - Liquid template engine
- `docs/projects/2026-01-23-FO-04/trines-thoughts.md` - Design brief with tone guidelines
- `docs/projects/2026-01-23-FO-04/2026-01-23-FO-04-spec.md` - Full specification

## Architecture
- Mastra agents use @mastra/core/agent
- Agents get system prompts from KV store or defaults
- Templates use Liquid syntax for variable substitution
- Server actions call agents via createAgent pattern

## Testing
- Agent file should export createFO04DiscoveryAgent function
- Run `npm run db:seed` to verify seed data

## Conventions
- Agent IDs: fo-04-discovery
- KV keys: versions.fo-04-discovery.system.default, etc.
- Return structured JSON for UI consumption
